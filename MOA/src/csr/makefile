# =====================================================================
# CUSTCSR\MAKEFILE - Custom 'C' Subroutines
#
#	An "NMAKE" makefile for the Windows/NT 3.1 and/or Daytona 3.5
#   which builds a sub-component of the mosaic OA product
#
#
# Application Information Type            Invoke NMAKE
# ----------------------------            ------------
# Make FAT Version                        nmake (or make all)
# Make SLIM Version                       nmake slim
# Make UNICODE Version                    nmake unicode
# Make CLEAN FAT Version                  nmake clean
# Make CLEAN SLIM Version                 nmake slimclean
# Make CLEAN UNICODE Version              nmake unicodeclean
# Check RCS Files                         nmake check (or nmake check CHKOPT="-d -A")
# Assign Symbolic Names to RCS Files      nmake name RCSNAME="R2C3"
#
# This version uses the file CSR.MAK generated by Visual C++ to
# do the actual make since the target is a DLL and VC++ is better
# at navigating through all the zillions of options than we are...
# =====================================================================
!include ..\makedflt

# -------------------------
#	NMAKE these
# -------------------------

all: csr

slim_all: slim_csr

csr:
	@echo ******  making $(exe)\csr.dll
	@attrib -r csr_v.rc
	rcbump $(VBOPTS) csr_v.rc
	@cd ..
	$(MAKE) /NOLOGO /S /f CSR.MAK CFG="csr - Win32 Debug"
	@cd csr

slim_csr:
	@echo ******  making $(exe)\csr.dll
	@attrib -r csr_v.rc
	rcbump $(VBOPTS) csr_v.rc
	@cd ..
	$(MAKE) nodebug=1 /NOLOGO /S /f CSR_S.MAK CFG="csr_s - Win32 Release"
	@cd csr

slim:
	@$(MAKE) nodebug=1 /NOLOGO slim_all

unicode:
	@$(MAKE) /NOLOGO CFG="Win32 Unicode"

check:
	@rcscheck $(CHKOPTS)

name:
	-@rcs -N$(RCSNAME):	*.c* *.h* *.rc makefile

clean: 
	@cd ..
	@echo ******  deleting debug CSR.MAK binaries
	@$(MAKE) /NOLOGO "DEBUG=1" /S /f csr.mak CFG="csr - Win32 Debug" CLEAN
	@cd csr

slimclean:
	@cd ..
	@echo ******  deleting slim CSR_S.MAK binaries
	@$(MAKE) /NOLOGO nodebug=1 /S /f csr_s.mak CFG="csr_s - Win32 Release" CLEAN
	@cd csr


