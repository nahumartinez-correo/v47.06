/****o* Pendientes de agrupación/OFB:post:MISCmuestraPaginas
* NOMBRE
*   OFB:post:MISCmuestraPaginas
* DESCRIPCION
*   Comportamiento del objeto (obligatorio)
* ENTRADAS
*   Parámetros de entrada de la rutina, sean argumentos o campos que tiene en cuenta
* SALIDAS
*   Campos modificados como resultado o returns cuyos valores sean no triviales
* IMPACTOS
*   Otros objetos que deberán ser analizados al modificar el objeto actual
* REFERENCIADO POR
*   Objetos que llaman al objeto documentado (obligatorio)
* DOCUMENTACION
*   Documentación relevante que deberá ser actualizada por la modificación de la rutina
* SOURCE
*/
#include "postmisc.h"

SUB post:MISCmuestraPaginas(mostrar)

   /********************************************************************************************************/
   /*                                                                                                      */
   /* [PAW - 03/11/99]      Muestra la cantidad de páginas a imprimir.                                     */
   /*                                                                                                      */
   /* [PAW - 17/12/99]      Modificación: se genera (previamente a avisar el número de páginas) la factura */
   /*                       para poder calcular la cantidad en forma más precisa y sin errores.            */
   /*                       Aclaración: se genera la factura 2 veces en caso de no entrar en una página ya */
   /*                       que presentaría diferencias. (hay ítems que no van - salen al anexo)           */
   /*                                                                                                      */
   /********************************************************************************************************/

	local modoAux like modoPrt

	modoAux = modoPrt

	if (post:importe_sesion > 0)
		call csr:printbuffer_init(TAMBUFFER)
		;[PAW] --> para que sume todas las lineas.
		entraEnUnaPag = "S"
  	 	modoPrt = FACTFIELD
    	Call post:MISCobtengo_cai
		call PRT_Factura
		Call post:MISCcantidad_fac_pag
		if (cantidad2 > 1)
			;[PAW] --> corroboro que entre en una página. (si no entra, calculo la
			;		   cantidad de paginas sin los items que corresponden al anexo).
			call csr:printbuffer_init(TAMBUFFER)
			entraEnUnaPag = "N"
			call PRT_Factura
			Call post:MISCcantidad_fac_pag
		endif
		if (mostrar == "S")
			cant = cantidad2
			refresh cant
		endif
	endif
	modoPrt = modoAux
	; Persistencia de cantidad2 y entraEnUnaPag.
	call post:CDSgrbEstImpre
END SUB

/*******/
