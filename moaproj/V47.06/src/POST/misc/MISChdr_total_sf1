/****o* Pago Fácil/OFB:post:MISChdr_total_sf1
* NOMBRE
*   OFB:post:MISChdr_total_sf1
* DESCRIPCION
*   Encabezado del reporte de Detalle de Servicios de Pago Facil por Operador que se imprime al cierre o por jefe de oficina
* ENTRADAS
*   Parámetros de entrada de la rutina, sean argumentos o campos que tiene en cuenta
* SALIDAS
*   Campos modificados como resultado o returns cuyos valores sean no triviales
* IMPACTOS
*   Otros objetos que deberán ser analizados al modificar el objeto actual
* REFERENCIADO POR
*   post:MISCtotales_sf1
* DOCUMENTACION
*   Documentación relevante que deberá ser actualizada por la modificación de la rutina
* SOURCE
*/
#include "postmisc.h"

SUB post:MISChdr_total_sf1
	LOCAL l_imprimible LIKE siaf:i
	LOCAL l_visible LIKE siaf:i
	LOCAL l_espacios LIKE siaf:i
	LOCAL espaciosBlancos LIKE siaf:i
	LOCAL cadena LIKE common:csr_string
	
	//NI 50183  
	siaf:i = 0 // se inicializa el contador de lineas
	//siaf:cta_hojas = siaf:cta_hojas + 1
	LET siaf:indica_calcu = siaf:indica_calcu + 1
	l_imprimible = 94 //caracteres que se imprimen 
	l_visible = 87 //caracteres visibles por panta
	IF (siaf:pantalla_impreso != "P") THEN
		FPRINT common:csr_string, "<pie>1</pie><long>%s</long><txS>90</txS>", l_imprimible
		CALL post:MISCimprime_linea(common:csr_string)
	END IF
	SELECT (siaf:pantalla_impreso)
		CASE "D"
		CASE "I"
			l_espacios = l_imprimible
		BREAK
		CASE "P"
			l_espacios = l_visible
		BREAK
	END SELECT
	
	FPRINT common:csr_string, "%8e - %e Pag.:%s", common:system_date,common:time_of_day, siaf:indica_calcu
	espaciosBlancos = l_espacios - common:csr_string.NUMCHARS - common:emp_desc.NUMCHARS
	FPRINT common:csr_string "%s%*.*s%s", common:emp_desc, espaciosBlancos, espaciosBlancos," ",common:csr_string
	CALL post:MISCimprime_linea(FLD:common:csr_string)
	CALL post:MISCimprime_linea(" ")
	
	SELECT (siaf:codigo_siaf_list)
	CASE 9540  
	CASE 9550    
		//gbp:NI50455 CORREO PAGOS                                                
		//FPRINT common:csr_string "DETALLE DE SERVICIOS DE PAGO FACIL POR OPERADOR"
		FPRINT common:csr_string "DETALLE DE SERVICIOS DE %s POR OPERADOR",DSC:post:descPagoFacil
	BREAK
	/*CASE 9550                                                        
		FPRINT common:csr_string "%26.26s Detalle de Servicios de Pago Facil por Operador"," "                
	BREAK*/
	CASE ELSE  
		//gbp:NI50455 CORREO PAGOS                 
		//FPRINT common:csr_string "DETALLE DE SERVICIOS DE PAGO FACIL POR OPERADOR" 
		FPRINT common:csr_string "DETALLE DE SERVICIOS DE %s POR OPERADOR",DSC:post:descPagoFacil             
	BREAK
	END SELECT   
	espaciosBlancos = (l_espacios - common:csr_string.NUMCHARS) / 2
	FPRINT common:csr_string "%*.*s%s", espaciosBlancos, espaciosBlancos," ", common:csr_string
	CALL post:MISCimprime_linea(common:csr_string)
	CALL post:MISCimprime_linea(" ")
	FPRINT common:csr_string,"OPERADOR:%-5.5s", op:op_operator_id
	FPRINT cadena,"SUCURSAL: %5.5s - %-35.35s",op:op_branch_id,admin:adt_br_bank_name
	espaciosBlancos = l_espacios - common:csr_string.NUMCHARS - cadena.NUMCHARS
	FPRINT common:csr_string "%s%*.*s%s", cadena, espaciosBlancos, espaciosBlancos," ",common:csr_string
	CALL post:MISCimprime_linea(FLD:common:csr_string)
	CALL post:MISCimprime_linea(" ")
	CALL post:MISCimprime_linea(" ")
	
	FPRINT common:csr_string "Fecha de Cobro : %e",jnl_fecha_llencont
	CALL post:MISCimprime_linea(common:csr_string)
	//NI 50183 - Se elimina la linea de la sucursal ya que se imprime arriba junto con el OPERADOR
	/*FPRINT common:csr_string "Sucursal       : %s ", common:sucursal_activa
	CALL post:MISCimprime_linea(common:csr_string)*/
	FPRINT common:csr_string "Operador       : %s ",siaf:aux_login_id
	CALL post:MISCimprime_linea(common:csr_string)
	
	//NI 50183 - Se encuadran los titulos en lineas punteadas
	common:csr_string = "-"
	CALL post:MISCreplicate_carac(common:csr_string,94)
	CALL post:MISCimprime_linea(common:csr_string)
	
	FPRINT common:csr_string "Cod.Servicio  Cant.de       Importe          Importe         Importe         Bonos"
	CALL post:MISCimprime_linea(common:csr_string)
	
	FPRINT common:csr_string "/Descripción   Oper.         Total          en efectivo     en bonos"
	CALL post:MISCimprime_linea(common:csr_string)
	
	common:csr_string = "-"
	CALL post:MISCreplicate_carac(common:csr_string,94)
	CALL post:MISCimprime_linea(common:csr_string)
END SUB

/*******/
