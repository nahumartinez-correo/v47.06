/****o* Pendientes de agrupación/OFB:post:CDSactBloqueoVentas
* NOMBRE
*   OFB:post:CDSactBloqueoVentas
* DESCRIPCION
*   Comportamiento del objeto (obligatorio)
* ENTRADAS
*   Parámetros de entrada de la rutina, sean argumentos o campos que tiene en cuenta
* SALIDAS
*   Campos modificados como resultado o returns cuyos valores sean no triviales
* IMPACTOS
*   Otros objetos que deberán ser analizados al modificar el objeto actual
* REFERENCIADO POR
*   Objetos que llaman al objeto documentado (obligatorio)
* DOCUMENTACION
*   Documentación relevante que deberá ser actualizada por la modificación de la rutina
* SOURCE
*/
#include "postcds.h"

SUB post:CDSactBloqueoVentas(valor)

	/******************************************************************************/
	/*                                                                            */
	/* [PAW - 12/01/00]: Esta rutina se encarga de actualizar el flag de bloqueo  */
	/*                   de ventas que se almacena en la tabla sucur_act.         */
	/*                                                                            */
	/* Entradas (param): "S" o "N" según cómo se desee modificar el flag.         */
	/*                                                                            */
	/* Salidas (retval): [ 0] - Actualización exitosa.                            */
	/*                   [-2] - Actualización no exitosa.                         */
	/*                                                                            */
	/******************************************************************************/

	call post:CDSabroSucurAct("L")
	; [PAW] --> me abre el contexto y bloquea el registro.
	post:bloqueoVentas = valor
	if (retval < 0)
		return retval
	else
		CDS APPEND DSC:siaf:adt_sucur_context post:bloqueoVentas
		CDS UPDATE DSC:siaf:adt_sucur_context LOCK
		if (cdsretval != 0)
			CDS UNLOCK DSC:siaf:adt_sucur_context
			CDS ENDSELECT DSC:siaf:adt_sucur_context
			return (-2)
		endif
		CDS UNLOCK DSC:siaf:adt_sucur_context
		CDS ENDSELECT DSC:siaf:adt_sucur_context
	endif
	return 0
END SUB

/*******/
