/****o* Pendientes de agrupación/OFB:post:FVALnuevaFechVto
* NOMBRE
*   OFB:post:FVALnuevaFechVto
* DESCRIPCION
*   Comportamiento del objeto (obligatorio)
* ENTRADAS
*   Parámetros de entrada de la rutina, sean argumentos o campos que tiene en cuenta
* SALIDAS
*   Campos modificados como resultado o returns cuyos valores sean no triviales
* IMPACTOS
*   Otros objetos que deberán ser analizados al modificar el objeto actual
* REFERENCIADO POR
*   Objetos que llaman al objeto documentado (obligatorio)
* DOCUMENTACION
*   Documentación relevante que deberá ser actualizada por la modificación de la rutina
* SOURCE
*/
#include "postfval.h"

SUB post:FVALnuevaFechVto
	
	 if (post:adt_stockp_vtofecha.numchars == 0) then
    	msgbox "Por favor, ingrese la fecha de vencimiento",0x00,"Error"
    	nextfield post:adt_stockp_vtofecha
    	return -2
    end if
	call csr:date_compare (adt_stockp_vtofecha, common:system_date)
	if (retval == 0 || retval == 1) then //quiere decir que la nueva fecha de vto es igual al dia de hoy o mayor
//	deberia dejarle una fecha menor?!! si para que venza alcanza con que sea igual al dia de hoy.
	else
		msgbox "La nueva fecha de vencimiento no puede ser menor al día de hoy",0x00,"Error"
		return -2
	end if
	
END SUB

/*******/
