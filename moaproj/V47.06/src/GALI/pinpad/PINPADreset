/****o* Pendientes de agrupación/OFB:gali:PINPADreset
* NOMBRE
*   OFB:gali:PINPADreset
* DESCRIPCION
*   Comportamiento del objeto (obligatorio)
* ENTRADAS
*   Parámetros de entrada de la rutina, sean argumentos o campos que tiene en cuenta
* SALIDAS
*   Campos modificados como resultado o returns cuyos valores sean no triviales
* IMPACTOS
*   Otros objetos que deberán ser analizados al modificar el objeto actual
* REFERENCIADO POR
*   Objetos que llaman al objeto documentado (obligatorio)
* DOCUMENTACION
*   Documentación relevante que deberá ser actualizada por la modificación de la rutina
* SOURCE
*/
#include "galipinpad.h"

SUB gali:PINPADreset
    	LOCAL COMANDO LIKE drv:dis_info_work
    	LOCAL RESPUESTA LIKE common:csr_string
    	LOCAL eodbytes LIKE drv:dis_info_work
    	LOCAL tries like siaf:dif

    	CLEARFIELD COMANDO
    	CLEARFIELD RESPUESTA
    	CLEARFIELD tries
   	CALL CSR:wingsp(GSP_PURGE,fd)
    	CALL CSR:wingsp(GSP_SET_TIMEOUT,5,5,5)
   	MOVE "***" TO COMANDO
   	CALL CSR:wingsp(GSP_WRITE,COMANDO,3,fd)
   	NAP 1000
    	DPRINT " Resetie el port \n"

	CALL gali:PINPADchecking

	IF (RETVAL < 0) THEN
		RETURN (-2)
    	END IF
END SUB

/*******/
